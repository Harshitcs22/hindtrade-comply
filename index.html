<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HindTrade Comply | The Border Has Changed</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- CBAM Calculator Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        background: '#050505',
                        surface: '#0A0A0A',
                        border: '#27272a',
                        primary: '#10b981',
                        textMain: '#E5E5E5',
                        textMuted: '#737373',
                    },
                    letterSpacing: {
                        tight: '-0.025em',
                        tighter: '-0.04em',
                    }
                }
            }
        }
    </script>
    
    <style>
        body { 
            background-color: #050505; 
            color: #E5E5E5;
            -webkit-font-smoothing: antialiased;
        }
        
        .hero-mesh {
            background-image:
                radial-gradient(at 50% 0%, rgba(16, 185, 129, 0.08) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(255, 255, 255, 0.03) 0px, transparent 50%);
        }

        /* --- SPOTLIGHT EFFECT CSS --- */
        .spotlight-card {
            position: relative;
            overflow: hidden;
            /* Keeps the original background colors but allows the glow overlay */
        }
        
        .spotlight-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(
                800px circle at var(--mouse-x, 0px) var(--mouse-y, 0px),
                rgba(255, 255, 255, 0.06),
                transparent 40%
            );
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            z-index: 1;
        }

        .spotlight-card:hover::before {
            opacity: 1;
        }

        /* Ensure content sits above the glow */
        .spotlight-card > * {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body class="selection:bg-primary/30 selection:text-white">

    <nav class="fixed w-full z-50 border-b border-white/5 bg-[#050505]/80 backdrop-blur-md">
        <div class="max-w-5xl mx-auto px-6 h-16 flex justify-between items-center">
            <div class="flex items-center font-medium tracking-tight text-sm text-white group cursor-pointer">
                HindTrade <span class="text-textMuted ml-1 group-hover:text-primary transition-colors">Comply</span>
            </div>
            <div class="flex items-center gap-6 text-xs font-medium text-textMuted">
                <a href="https://hindtradeai.vercel.app/" target="_blank" class="hover:text-white transition">
                    Parent Company
                </a>
                <button class="text-white px-3 py-1.5 rounded bg-white/10 hover:bg-white/15 transition border border-white/10">
                    Sign In
                </button>
            </div>
        </div>
    </nav>

    <section class="relative pt-32 pb-20 hero-mesh">
        <div class="max-w-3xl mx-auto px-6 text-center">
            
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-emerald-400/40 bg-emerald-500/10 text-emerald-300 text-[11px] font-medium mb-8 tracking-[0.16em] uppercase">
                <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse shadow-[0_0_8px_rgba(52,211,153,0.9)]"></span>
                CBAM 2026 • Action Required for EU Shipments
            </div>

            <h1 class="text-4xl md:text-6xl font-medium tracking-tighter text-white mb-6 leading-[1.1]">
                The border has changed.<br>
                <span class="text-textMuted">Your paperwork hasn't.</span>
            </h1>

            <p class="text-lg text-textMuted mb-10 max-w-xl mx-auto font-light leading-relaxed">
                European Customs now want transparent, ISO 14067–aligned carbon math, not just invoices. <strong>HindTrade Comply</strong> pairs a calculation engine with a live Auditor Network so your containers don’t get stuck at EU borders.
            </p>

            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button id="openCalculatorBtn" class="bg-white text-black font-medium px-8 py-3 rounded hover:bg-gray-200 transition text-sm">
                    Generate CBAM Report
                </button>
                <button class="text-textMuted hover:text-white font-medium px-8 py-3 transition text-sm flex items-center justify-center">
                    View Sample Certificate <i data-lucide="arrow-right" class="w-4 h-4 ml-2 opacity-50"></i>
                </button>
            </div>
        </div>
    </section>

    <section class="py-12 border-y border-white/5 bg-[#060606]">
        <div class="max-w-4xl mx-auto px-6">
            <h2 class="text-lg font-medium text-white mb-3">Why CBAM is suddenly non‑negotiable</h2>
            <p class="text-xs text-textMuted leading-relaxed mb-3">
                From 1 January 2026, the EU’s Carbon Border Adjustment Mechanism (CBAM) moves into its definitive phase: importers of iron & steel, aluminium, cement, fertilisers, hydrogen and electricity must be authorised CBAM declarants, report embedded emissions, and surrender CBAM certificates for goods placed on the EU market.
                <sup>
                    <a href="https://taxation-customs.ec.europa.eu/carbon-border-adjustment-mechanism_en" target="_blank" class="underline decoration-white/20 hover:decoration-primary">
                        EU official CBAM page
                    </a>
                </sup>
            </p>
            <p class="text-xs text-textMuted leading-relaxed">
                The UK has also confirmed it will introduce its own CBAM from 2027, with draft primary legislation already under consultation and sector‑specific CBAM rates to be published ahead of go‑live.
                <sup>
                    <a href="https://www.gov.uk/government/publications/factsheet-carbon-border-adjustment-mechanism-cbam/factsheet-carbon-border-adjustment-mechanism" target="_blank" class="underline decoration-white/20 hover:decoration-primary">
                        UK Government factsheet
                    </a>
                </sup>
            </p>
        </div>
    </section>

    <section class="py-16 border-b border-white/5 bg-[#050505]">
        <div class="max-w-4xl mx-auto px-6">
            <h2 class="text-lg font-medium text-white mb-4">TARIC is getting opinionated about your carbon data</h2>
            <p class="text-xs text-textMuted leading-relaxed mb-4">
                The European Commission has already updated the TARIC customs system to integrate CBAM codes ahead of full implementation in 2026 — including hard conditions that decide whether CBAM goods are even allowed to clear EU customs.
                <sup>
                    <a href="https://www.steelorbis.com/steel-news/latest-news/eu-updates-taric-system-to-integrate-cbam-ahead-of-full-implementation-in-2026-1423774.htm" target="_blank" class="underline decoration-white/20 hover:decoration-primary">
                        SteelOrbis summary
                    </a>
                </sup>
            </p>

            <div class="grid md:grid-cols-3 gap-6 text-[11px] text-textMuted">
                <div class="spotlight-card p-4 rounded border border-white/10 bg-[#080808]">
                    <div class="text-red-400 font-semibold mb-1 text-[10px] tracking-[0.14em] uppercase">
                        Y060 • Block Condition
                    </div>
                    <p class="leading-relaxed">
                        If none of the required CBAM certificates apply, TARIC condition Y060 blocks the importation of CBAM goods. In plain English: the system itself can stop your steel, aluminium or cement at the border if the data and documentation are not in order.
                    </p>
                </div>
                <div class="spotlight-card p-4 rounded border border-white/10 bg-[#080808]">
                    <div class="text-emerald-400 font-semibold mb-1 text-[10px] tracking-[0.14em] uppercase">
                        Y128 • Standard Clearance
                    </div>
                    <p class="leading-relaxed">
                        Certificate Y128 records the CBAM account number of the authorised declarant and is the basis for “normal” CBAM imports. <strong>HindTrade Comply</strong> focuses on generating the ISO 14067‑style data pack your EU buyer needs to support their Y128 filings.
                    </p>
                </div>
                <div class="spotlight-card p-4 rounded border border-white/10 bg-[#080808]">
                    <div class="text-amber-300 font-semibold mb-1 text-[10px] tracking-[0.14em] uppercase">
                        Y238 • Application Pending
                    </div>
                    <p class="leading-relaxed">
                        For buyers whose CBAM declarant status is still under review, certificate Y238 allows temporary clearance while the application is processed. Having clean, auditable carbon data from day one makes it much easier for them to keep using Y238 without interruptions.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 border-y border-white/5 bg-[#080808]">
        <div class="max-w-4xl mx-auto px-6">
            <div class="grid md:grid-cols-[1fr_2fr] gap-12">
                
                <div>
                    <h2 class="text-xl font-medium text-white mb-2">Our Heritage</h2>
                    <div class="h-0.5 w-12 bg-primary/50 mb-4"></div>
                    <p class="text-sm text-textMuted">
                        From the team behind 
                        <a href="https://hindtradeai.vercel.app/" target="_blank" class="text-white underline decoration-white/20 hover:decoration-primary underline-offset-4">
                            HindTrade AI
                        </a>.
                    </p>
                </div>

                <div class="space-y-6 text-sm leading-7 text-gray-400 font-light">
                    <p>
                        We didn't just wake up and decide to build a calculator. We are building the <strong class="text-white font-medium">Agent-Led Trade Network</strong>.
                    </p>
                    <p>
                        At HindTrade, we believe <em>Code is Law</em> and <em>Trust is Currency</em>. We have already deployed 7 AI Agents that automate the export journey—from buyer discovery to CA verification. We know the domain because we live in it.
                    </p>
                    <p>
                        When the CBAM 2026 regulations were announced, we saw Indian exporters panicking. Consultants were charging ₹50k for a spreadsheet.
                    </p>
                    <p>
                        So we took our <strong>Trade Card technology</strong> (QR backed by CA audits) and recalibrated it for Carbon. Everything verified, nothing manual.
                    </p>
                    
                    <div class="pt-4">
                        <a href="https://hindtradeai.vercel.app/" target="_blank" class="inline-flex items-center text-primary hover:text-emerald-300 transition text-sm font-medium">
                            Explore the HindTrade OS <i data-lucide="arrow-up-right" class="w-4 h-4 ml-1"></i>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section class="py-24 max-w-5xl mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-2xl font-medium text-white tracking-tight">How we solve liability</h2>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
            <div class="spotlight-card p-6 rounded border border-white/5 bg-surface/50">
                <div class="text-primary mb-4"><i data-lucide="file-up" class="w-6 h-6"></i></div>
                <h3 class="text-white font-medium mb-2 text-sm">1. Evidence Upload</h3>
                <p class="text-textMuted text-xs leading-relaxed">
                    You upload raw bills (Electricity & Diesel). We don't take your word for it; we take the source document.
                </p>
            </div>

            <div class="spotlight-card p-6 rounded border border-white/5 bg-surface/50">
                <div class="text-primary mb-4"><i data-lucide="cpu" class="w-6 h-6"></i></div>
                <h3 class="text-white font-medium mb-2 text-sm">2. ISO 14067 Engine</h3>
                <p class="text-textMuted text-xs leading-relaxed">
                    Our system maps your consumption to the Indian Grid Emission Factor band (around 0.7 kgCO₂/kWh based on latest public data) automatically, and applies ISO 14067 methodology on top.
                </p>
            </div>

            <div class="spotlight-card p-6 rounded border border-primary/20 bg-primary/5">
                <div class="text-primary mb-4"><i data-lucide="pen-tool" class="w-6 h-6"></i></div>
                <h3 class="text-white font-medium mb-2 text-sm">3. Auditor Sign-off</h3>
                <p class="text-textMuted text-xs leading-relaxed">
                    A BEE Certified Energy Auditor reviews the calc and digitally signs it (DSC). This makes it a legal, banking‑grade document.
                </p>
            </div>
        </div>
    </section>

    <section class="py-24 border-t border-white/5">
        <div class="max-w-4xl mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-8 items-center">
                
                <div class="p-8">
                    <div class="text-lg font-medium text-white mb-2">Self Declaration</div>
                    <div class="text-3xl font-medium text-white mb-6">₹999</div>
                    <p class="text-xs text-textMuted mb-8 leading-relaxed">
                        Best for internal audits or non‑EU buyers who just want to see green initiatives. Signed by you, backed by our engine.
                    </p>
                    <button class="w-full py-3 rounded border border-white/20 text-white text-sm hover:bg-white/5 transition">
                        Select Standard
                    </button>
                </div>

                <div class="spotlight-card p-8 rounded bg-[#0F0F0F] border border-white/10 shadow-2xl relative">
                     <div class="absolute top-0 right-0 bg-primary/10 text-primary text-[10px] font-bold px-2 py-1 uppercase tracking-wider z-20">
                        Suggested for EU
                    </div>
                    <div class="text-lg font-medium text-white mb-2">Auditor Verified</div>
                    <div class="text-3xl font-medium text-white mb-6">₹2,999</div>
                    <p class="text-xs text-textMuted mb-8 leading-relaxed">
                        Includes valid Digital Signature (DSC) from a BEE Certified Energy Auditor. This is what your buyer needs when they file CBAM declarations linked to TARIC certificates like Y128.
                    </p>
                    <button class="w-full py-3 rounded bg-white text-black font-medium text-sm hover:bg-gray-200 transition">
                        Get Verified Certificate
                    </button>
                </div>

            </div>
        </div>
    </section>

    <section class="py-24 max-w-3xl mx-auto px-6 border-t border-white/5">
        <h2 class="text-xl font-medium text-white mb-10">Technical Analysis</h2>
        
        <div class="space-y-1">
            <details class="group open:bg-white/5 rounded transition-all">
                <summary class="flex justify-between items-center p-4 cursor-pointer text-sm text-gray-300 hover:text-white">
                    Does this meet the "Verification" criteria for EU CBAM?
                    <i data-lucide="plus" class="w-4 h-4 text-textMuted group-open:hidden"></i>
                    <i data-lucide="minus" class="w-4 h-4 text-textMuted hidden group-open:block"></i>
                </summary>
                <div class="px-4 pb-4 text-textMuted text-xs leading-relaxed">
                    Yes. The EU regulation explicitly asks for the methodology to follow ISO 14067‑style product carbon footprinting. Our Gold tier adds the "Third Party Verification" layer by attaching the Digital Signature of a Government Authorized Auditor (BEE), which removes the conflict of interest inherent in self‑declarations.
                </div>
            </details>

            <details class="group open:bg-white/5 rounded transition-all">
                <summary class="flex justify-between items-center p-4 cursor-pointer text-sm text-gray-300 hover:text-white">
                    How is the "Embedded Emission" calculated?
                    <i data-lucide="plus" class="w-4 h-4 text-textMuted group-open:hidden"></i>
                    <i data-lucide="minus" class="w-4 h-4 text-textMuted hidden group-open:block"></i>
                </summary>
                <div class="px-4 pb-4 text-textMuted text-xs leading-relaxed">
                    We use the formula: <em>(Electricity kWh × Grid Factor) + (Fuel L × Emission Factor) / Total Production Kg</em>. The Grid Factor is pulled from the latest Indian power‑mix data, and fuel factors are based on standard references, so your report is both explainable and updatable as regulations evolve.
                </div>
            </details>

            <details class="group open:bg-white/5 rounded transition-all">
                <summary class="flex justify-between items-center p-4 cursor-pointer text-sm text-gray-300 hover:text-white">
                    What happens if I use the ₹999 plan for EU Exports?
                    <i data-lucide="plus" class="w-4 h-4 text-textMuted group-open:hidden"></i>
                    <i data-lucide="minus" class="w-4 h-4 text-textMuted hidden group-open:block"></i>
                </summary>
                <div class="px-4 pb-4 text-textMuted text-xs leading-relaxed">
                    You risk rejection at the border. The ₹999 plan is a "Self Declaration". While the math is correct, it lacks the independent authority's signature. If a Customs Officer flags your shipment for audit — especially under TARIC condition Y060 — a self‑declaration is often insufficient proof of due diligence.
                </div>
            </details>
        </div>
    </section>

    <footer class="py-12 text-center border-t border-white/5">
        <div class="text-xs text-textMuted mb-2">
            Founded and architected by <span class="text-white font-medium hover:text-primary transition-colors cursor-default">Harshit Choudhary</span>, NITJ CSE.
        </div>
        <div class="text-[10px] text-gray-600">
            Estonia • Powered by <span class="text-white">HindTrade AI</span>
        </div>
    </footer>

    <!-- CBAM Calculator Modal -->
    <div id="calculatorModal" class="fixed inset-0 z-50 hidden bg-black/90 backdrop-blur-sm">
        <div class="h-full overflow-y-auto py-8">
            <div class="max-w-7xl mx-auto px-6">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-medium text-white tracking-tight">CBAM Calculator <span class="text-emerald-400">• Q1 2026</span></h2>
                    <button id="closeCalculatorBtn" class="text-textMuted hover:text-white transition">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- 2-Column Dashboard -->
                <div class="grid lg:grid-cols-2 gap-6">
                    
                    <!-- LEFT PANEL - Inputs -->
                    <div class="space-y-6">
                        <!-- CN Code Input -->
                        <div class="p-6 rounded border border-white/10 bg-[#0A0A0A]">
                            <label class="block text-sm font-medium text-white mb-2">
                                CN Code (8-digit)
                            </label>
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="cnCode" 
                                    placeholder="e.g., 72101000"
                                    maxlength="8"
                                    class="w-full px-4 py-3 rounded bg-[#050505] border border-white/20 text-white text-sm focus:border-emerald-400 focus:outline-none transition"
                                >
                                <div id="cnFeedback" class="absolute right-3 top-3 hidden">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-emerald-400"></i>
                                </div>
                            </div>
                            <div id="productType" class="mt-2 text-xs text-textMuted"></div>
                        </div>

                        <!-- Production Quantity -->
                        <div class="p-6 rounded border border-white/10 bg-[#0A0A0A]">
                            <label class="block text-sm font-medium text-white mb-2">
                                Production Quantity (tonnes)
                            </label>
                            <input 
                                type="number" 
                                id="productionQty" 
                                placeholder="1000"
                                class="w-full px-4 py-3 rounded bg-[#050505] border border-white/20 text-white text-sm focus:border-emerald-400 focus:outline-none transition"
                            >
                        </div>

                        <!-- Energy Inputs -->
                        <div class="p-6 rounded border border-white/10 bg-[#0A0A0A]">
                            <h3 class="text-sm font-medium text-white mb-4">Energy Consumption</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs text-textMuted mb-2">Electricity (kWh)</label>
                                    <input 
                                        type="number" 
                                        id="electricity" 
                                        placeholder="50000"
                                        class="w-full px-4 py-2 rounded bg-[#050505] border border-white/20 text-white text-sm focus:border-emerald-400 focus:outline-none transition"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs text-textMuted mb-2">Diesel (Liters)</label>
                                    <input 
                                        type="number" 
                                        id="diesel" 
                                        placeholder="5000"
                                        class="w-full px-4 py-2 rounded bg-[#050505] border border-white/20 text-white text-sm focus:border-emerald-400 focus:outline-none transition"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs text-textMuted mb-2">Coal (Kg)</label>
                                    <input 
                                        type="number" 
                                        id="coal" 
                                        placeholder="10000"
                                        class="w-full px-4 py-2 rounded bg-[#050505] border border-white/20 text-white text-sm focus:border-emerald-400 focus:outline-none transition"
                                    >
                                </div>
                            </div>
                        </div>

                        <!-- Precursor Toggle -->
                        <div class="p-6 rounded border border-white/10 bg-[#0A0A0A]">
                            <div class="flex justify-between items-center mb-4">
                                <label class="text-sm font-medium text-white">Include Complex Goods?</label>
                                <button id="precursorToggle" class="relative w-12 h-6 rounded-full bg-white/10 transition" data-active="false">
                                    <div class="absolute w-5 h-5 bg-white rounded-full top-0.5 left-0.5 transition-transform duration-200"></div>
                                </button>
                            </div>
                            
                            <div id="precursorInputs" class="hidden space-y-3">
                                <div id="precursorList" class="space-y-2"></div>
                                <button id="addPrecursorBtn" class="text-xs text-emerald-400 hover:text-emerald-300 transition flex items-center gap-1">
                                    <i data-lucide="plus" class="w-3 h-3"></i> Add Material
                                </button>
                            </div>
                        </div>

                        <!-- Calculate Button -->
                        <button id="calculateBtn" class="w-full py-4 rounded bg-emerald-500 hover:bg-emerald-600 text-black font-medium text-sm transition">
                            Calculate Embedded Intensity
                        </button>
                    </div>

                    <!-- RIGHT PANEL - Outputs -->
                    <div class="space-y-6">
                        <!-- Main Display -->
                        <div class="p-8 rounded border border-emerald-400/30 bg-emerald-500/5">
                            <div class="text-xs text-emerald-400 uppercase tracking-wider mb-2">Embedded Intensity</div>
                            <div id="mainResult" class="text-5xl font-bold text-white mb-2">--</div>
                            <div class="text-sm text-textMuted">tCO₂e per tonne</div>
                        </div>

                        <!-- Expiry Badge -->
                        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-purple-400/40 bg-purple-500/10 text-purple-300 text-xs font-medium">
                            <span class="w-2 h-2 rounded-full bg-purple-400 animate-pulse"></span>
                            Valid for Q1 2026
                        </div>

                        <!-- Breakdown Table -->
                        <div class="p-6 rounded border border-white/10 bg-[#0A0A0A]">
                            <h3 class="text-sm font-medium text-white mb-4">Emissions Breakdown</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between items-center pb-2 border-b border-white/10">
                                    <span class="text-textMuted">Scope 1 (Direct Fuel)</span>
                                    <span id="scope1Result" class="text-white font-medium">-- tCO₂e</span>
                                </div>
                                <div class="flex justify-between items-center pb-2 border-b border-white/10">
                                    <span class="text-textMuted">Scope 2 (Electricity)</span>
                                    <span id="scope2Result" class="text-white font-medium">-- tCO₂e</span>
                                </div>
                                <div class="flex justify-between items-center pb-2 border-b border-white/10">
                                    <span class="text-textMuted">Scope 3 (Precursors)</span>
                                    <span id="scope3Result" class="text-white font-medium">-- tCO₂e</span>
                                </div>
                                <div class="flex justify-between items-center pt-2">
                                    <span class="text-white font-medium">Total Emissions</span>
                                    <span id="totalResult" class="text-emerald-400 font-bold">-- tCO₂e</span>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <button id="downloadPDFBtn" class="w-full py-3 rounded bg-white text-black font-medium text-sm hover:bg-gray-200 transition">
                                Download PDF Certificate
                            </button>
                            <button id="downloadXMLBtn" class="w-full py-3 rounded border border-white/20 text-white text-sm hover:bg-white/5 transition">
                                Download XML Report
                            </button>
                        </div>

                        <!-- Methodology Footer -->
                        <div class="p-4 rounded border border-white/5 bg-[#050505]">
                            <p class="text-xs text-textMuted leading-relaxed">
                                <strong class="text-white">Methodology:</strong> ISO 14067 + CBAM Annex III<br>
                                <strong class="text-white">Grid Factor:</strong> 0.715 tCO₂e/MWh (India CEA 2026)
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        const cards = document.querySelectorAll('.spotlight-card');
        
        cards.forEach(card => {
            card.onmousemove = e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            }
        });

        // ============================================
        // CBAM CALCULATOR LOGIC ENGINE (Jan 2026)
        // ============================================

        // Constants
        const CONSTANTS = {
            GRID_FACTOR: 0.715,      // tCO2e per MWh (India CEA 2026)
            DIESEL_FACTOR: 3.16,      // tCO2e per 1000L
            COAL_FACTOR: 2.5,         // tCO2e per 1000kg
            PRECURSORS: {
                'Iron Ore': 0.8,
                'Scrap': 0.9,
                'Aluminum': 0.4,
                'Coke': 3.6
            }
        };

        let precursorCount = 0;
        let calculationResults = null;

        // Modal Controls
        const modal = document.getElementById('calculatorModal');
        const openBtn = document.getElementById('openCalculatorBtn');
        const closeBtn = document.getElementById('closeCalculatorBtn');

        openBtn.addEventListener('click', () => {
            modal.classList.remove('hidden');
            loadState();
            lucide.createIcons();
        });

        closeBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        // CN Code Validation
        const cnCodeInput = document.getElementById('cnCode');
        const cnFeedback = document.getElementById('cnFeedback');
        const productType = document.getElementById('productType');

        function validateCNCode(code) {
            const regex = /^[0-9]{8}$/;
            const isValid = regex.test(code);
            
            if (isValid) {
                cnFeedback.classList.remove('hidden');
                cnFeedback.innerHTML = '<i data-lucide="check-circle" class="w-5 h-5 text-emerald-400"></i>';
                
                // Auto-detect product type
                const prefix = code.substring(0, 2);
                if (prefix === '72') {
                    productType.textContent = '✓ Detected: Iron & Steel';
                    productType.classList.add('text-emerald-400');
                } else if (prefix === '76') {
                    productType.textContent = '✓ Detected: Aluminum';
                    productType.classList.add('text-emerald-400');
                } else {
                    productType.textContent = '✓ Valid CN Code';
                    productType.classList.add('text-emerald-400');
                }
                lucide.createIcons();
            } else if (code.length > 0) {
                cnFeedback.classList.remove('hidden');
                cnFeedback.innerHTML = '<i data-lucide="x-circle" class="w-5 h-5 text-red-400"></i>';
                productType.textContent = '✗ Must be exactly 8 digits';
                productType.classList.remove('text-emerald-400');
                productType.classList.add('text-red-400');
                lucide.createIcons();
            } else {
                cnFeedback.classList.add('hidden');
                productType.textContent = '';
            }
            
            return isValid;
        }

        cnCodeInput.addEventListener('input', (e) => {
            validateCNCode(e.target.value);
            saveState();
        });

        // Precursor Toggle
        const precursorToggle = document.getElementById('precursorToggle');
        const precursorInputs = document.getElementById('precursorInputs');

        precursorToggle.addEventListener('click', () => {
            const isActive = precursorToggle.dataset.active === 'true';
            precursorToggle.dataset.active = !isActive;
            
            if (!isActive) {
                precursorToggle.classList.add('bg-emerald-500');
                precursorToggle.querySelector('div').style.transform = 'translateX(1.5rem)';
                precursorInputs.classList.remove('hidden');
            } else {
                precursorToggle.classList.remove('bg-emerald-500');
                precursorToggle.querySelector('div').style.transform = 'translateX(0)';
                precursorInputs.classList.add('hidden');
            }
            saveState();
        });

        // Add Precursor Material
        const addPrecursorBtn = document.getElementById('addPrecursorBtn');
        const precursorList = document.getElementById('precursorList');

        addPrecursorBtn.addEventListener('click', () => {
            precursorCount++;
            const precursorItem = document.createElement('div');
            precursorItem.className = 'flex gap-2';
            precursorItem.innerHTML = `
                <select class="flex-1 px-3 py-2 rounded bg-[#050505] border border-white/20 text-white text-xs focus:border-emerald-400 focus:outline-none transition precursor-type">
                    <option value="">Select Material</option>
                    ${Object.keys(CONSTANTS.PRECURSORS).map(p => `<option value="${p}">${p}</option>`).join('')}
                </select>
                <input 
                    type="number" 
                    placeholder="Tonnes"
                    class="w-24 px-3 py-2 rounded bg-[#050505] border border-white/20 text-white text-xs focus:border-emerald-400 focus:outline-none transition precursor-qty"
                >
                <button class="text-red-400 hover:text-red-300 transition remove-precursor">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            `;
            precursorList.appendChild(precursorItem);
            
            precursorItem.querySelector('.remove-precursor').addEventListener('click', () => {
                precursorItem.remove();
                saveState();
            });

            precursorItem.querySelector('.precursor-type').addEventListener('change', saveState);
            precursorItem.querySelector('.precursor-qty').addEventListener('input', saveState);
            
            lucide.createIcons();
            saveState();
        });

        // Core Calculation Function
        const calculateBtn = document.getElementById('calculateBtn');
        calculateBtn.addEventListener('click', calculate);

        function calculate() {
            // Get inputs
            const cnCode = document.getElementById('cnCode').value;
            const productionQty = parseFloat(document.getElementById('productionQty').value) || 0;
            const electricity = parseFloat(document.getElementById('electricity').value) || 0;
            const diesel = parseFloat(document.getElementById('diesel').value) || 0;
            const coal = parseFloat(document.getElementById('coal').value) || 0;

            // Validate
            if (!validateCNCode(cnCode)) {
                alert('Please enter a valid 8-digit CN Code');
                return;
            }
            if (productionQty <= 0) {
                alert('Please enter production quantity');
                return;
            }

            // Calculate Scope 1 (Direct Fuel)
            const scope1Diesel = (diesel / 1000) * CONSTANTS.DIESEL_FACTOR;
            const scope1Coal = (coal / 1000) * CONSTANTS.COAL_FACTOR;
            const scope1Total = scope1Diesel + scope1Coal;

            // Calculate Scope 2 (Electricity)
            const scope2Total = (electricity / 1000) * CONSTANTS.GRID_FACTOR;

            // Calculate Scope 3 (Precursors)
            let scope3Total = 0;
            const precursorItems = document.querySelectorAll('#precursorList > div');
            precursorItems.forEach(item => {
                const type = item.querySelector('.precursor-type').value;
                const qty = parseFloat(item.querySelector('.precursor-qty').value) || 0;
                if (type && qty > 0) {
                    scope3Total += qty * CONSTANTS.PRECURSORS[type];
                }
            });

            // Total emissions and embedded intensity
            const totalEmissions = scope1Total + scope2Total + scope3Total;
            const embeddedIntensity = totalEmissions / productionQty;

            // Store results
            calculationResults = {
                scope1: scope1Total,
                scope2: scope2Total,
                scope3: scope3Total,
                total: totalEmissions,
                intensity: embeddedIntensity,
                cnCode: cnCode,
                productionQty: productionQty
            };

            // Update UI
            document.getElementById('mainResult').textContent = embeddedIntensity.toFixed(3);
            document.getElementById('scope1Result').textContent = scope1Total.toFixed(2) + ' tCO₂e';
            document.getElementById('scope2Result').textContent = scope2Total.toFixed(2) + ' tCO₂e';
            document.getElementById('scope3Result').textContent = scope3Total.toFixed(2) + ' tCO₂e';
            document.getElementById('totalResult').textContent = totalEmissions.toFixed(2) + ' tCO₂e';

            saveState();
        }

        // State Persistence
        function saveState() {
            const state = {
                cnCode: document.getElementById('cnCode').value,
                productionQty: document.getElementById('productionQty').value,
                electricity: document.getElementById('electricity').value,
                diesel: document.getElementById('diesel').value,
                coal: document.getElementById('coal').value,
                precursorActive: precursorToggle.dataset.active,
                precursors: []
            };

            const precursorItems = document.querySelectorAll('#precursorList > div');
            precursorItems.forEach(item => {
                state.precursors.push({
                    type: item.querySelector('.precursor-type').value,
                    qty: item.querySelector('.precursor-qty').value
                });
            });

            localStorage.setItem('cbamCalculatorState', JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem('cbamCalculatorState');
            if (!saved) return;

            const state = JSON.parse(saved);
            document.getElementById('cnCode').value = state.cnCode || '';
            document.getElementById('productionQty').value = state.productionQty || '';
            document.getElementById('electricity').value = state.electricity || '';
            document.getElementById('diesel').value = state.diesel || '';
            document.getElementById('coal').value = state.coal || '';

            if (state.cnCode) validateCNCode(state.cnCode);

            if (state.precursorActive === 'true') {
                precursorToggle.click();
                state.precursors.forEach(p => {
                    addPrecursorBtn.click();
                    const lastItem = precursorList.lastElementChild;
                    lastItem.querySelector('.precursor-type').value = p.type;
                    lastItem.querySelector('.precursor-qty').value = p.qty;
                });
            }
        }

        // PDF Generation
        const downloadPDFBtn = document.getElementById('downloadPDFBtn');
        downloadPDFBtn.addEventListener('click', generatePDF);

        function generatePDF() {
            if (!calculationResults) {
                alert('Please calculate emissions first');
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Header
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('CBAM COMPLIANCE CERTIFICATE', 105, 20, { align: 'center' });

            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('ISO 14067 + CBAM Annex III Methodology', 105, 28, { align: 'center' });

            // Certificate Details
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Certificate Details', 20, 45);

            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const certId = 'CBAM-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            const currentDate = new Date().toLocaleDateString('en-GB');
            
            doc.text(`Certificate ID: ${certId}`, 20, 55);
            doc.text(`Issue Date: ${currentDate}`, 20, 62);
            doc.text(`Valid Until: 31 March 2026`, 20, 69);
            doc.text(`CN Code: ${calculationResults.cnCode}`, 20, 76);

            // Main Result
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(16, 185, 129);
            doc.text(`Embedded Intensity: ${calculationResults.intensity.toFixed(3)} tCO₂e/tonne`, 20, 90);
            doc.setTextColor(0, 0, 0);

            // Emissions Breakdown Table
            doc.autoTable({
                startY: 100,
                head: [['Emission Scope', 'Value (tCO₂e)']],
                body: [
                    ['Scope 1 (Direct Fuel)', calculationResults.scope1.toFixed(2)],
                    ['Scope 2 (Electricity)', calculationResults.scope2.toFixed(2)],
                    ['Scope 3 (Precursors)', calculationResults.scope3.toFixed(2)],
                    ['Total Emissions', calculationResults.total.toFixed(2)]
                ],
                theme: 'striped',
                headStyles: { fillColor: [16, 185, 129] },
                styles: { fontSize: 10 }
            });

            // Methodology
            const finalY = doc.lastAutoTable.finalY + 10;
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('Methodology:', 20, finalY);
            doc.setFont(undefined, 'normal');
            doc.text('Grid Factor: 0.715 tCO₂e/MWh (India CEA 2026)', 20, finalY + 7);
            doc.text('Diesel Factor: 3.16 tCO₂e/1000L', 20, finalY + 14);
            doc.text('Coal Factor: 2.5 tCO₂e/1000kg', 20, finalY + 21);

            // QR Code
            const qrContainer = document.createElement('div');
            qrContainer.id = 'qr-temp';
            document.body.appendChild(qrContainer);
            
            const qrcode = new QRCode(qrContainer, {
                text: `https://hindtrade.io/verify/${certId}`,
                width: 80,
                height: 80
            });

            setTimeout(() => {
                const qrImage = qrContainer.querySelector('img');
                if (qrImage) {
                    doc.addImage(qrImage.src, 'PNG', 160, finalY, 30, 30);
                    doc.setFontSize(8);
                    doc.text('Scan to Verify', 167, finalY + 35);
                }
                document.body.removeChild(qrContainer);

                // Footer
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.text('Generated by HindTrade Comply • https://hindtrade.io', 105, 280, { align: 'center' });

                // Save
                doc.save(`CBAM-Certificate-${certId}.pdf`);
            }, 500);
        }

        // XML Export
        const downloadXMLBtn = document.getElementById('downloadXMLBtn');
        downloadXMLBtn.addEventListener('click', generateXML);

        function generateXML() {
            if (!calculationResults) {
                alert('Please calculate emissions first');
                return;
            }

            const certId = 'CBAM-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            const currentDate = new Date().toISOString();

            const xml = `<?xml version="1.0" encoding="UTF-8"?>
<CBAMReport xmlns="urn:cbam:compliance:2026">
    <Certificate>
        <ID>${certId}</ID>
        <IssueDate>${currentDate}</IssueDate>
        <ValidUntil>2026-03-31T23:59:59Z</ValidUntil>
        <CNCode>${calculationResults.cnCode}</CNCode>
    </Certificate>
    <EmbeddedEmissions>
        <TotalIntensity unit="tCO2e/tonne">${calculationResults.intensity.toFixed(3)}</TotalIntensity>
        <Scope1 unit="tCO2e">${calculationResults.scope1.toFixed(2)}</Scope1>
        <Scope2 unit="tCO2e">${calculationResults.scope2.toFixed(2)}</Scope2>
        <Scope3 unit="tCO2e">${calculationResults.scope3.toFixed(2)}</Scope3>
        <TotalEmissions unit="tCO2e">${calculationResults.total.toFixed(2)}</TotalEmissions>
    </EmbeddedEmissions>
    <Methodology>
        <Standard>ISO 14067 + CBAM Annex III</Standard>
        <GridFactor>0.715</GridFactor>
        <Country>India</Country>
    </Methodology>
    <Production>
        <Quantity unit="tonnes">${calculationResults.productionQty}</Quantity>
    </Production>
</CBAMReport>`;

            const blob = new Blob([xml], { type: 'application/xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `CBAM-Report-${certId}.xml`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Auto-save on input changes
        ['productionQty', 'electricity', 'diesel', 'coal'].forEach(id => {
            document.getElementById(id).addEventListener('input', saveState);
        });
    </script>
</body>
</html>
